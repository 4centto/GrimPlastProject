(this["webpackJsonpgrimplast-web"]=this["webpackJsonpgrimplast-web"]||[]).push([[0],{40:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(29),s=n.n(a),r=n(31),o=n(3),i=n(7),l=n.n(i),u=n(11),d=n(2),j=n.p+"static/media/icon.13f6e339.png",b=(n(40),n(0)),O=function(){return Object(b.jsx)("div",{className:"contHeader",children:Object(b.jsx)("div",{className:"header",children:Object(b.jsx)("img",{src:j,className:"img"})})})},p=n(10),h=n.n(p),m="https://grimplast-native.herokuapp.com/",x=(n(59),function(e){var t=e.handleSubmit,n=e.handleAgregar,a=e.handleQuitar,s=e.cantidad,r=e.setCantidad,o=e.setProducto,i=e.setPrecio,j=e.setPzs,O=(e.setLoading,e.setFatal),p=e.history,x=Object(c.useState)([]),f=Object(d.a)(x,2),v=f[0],g=f[1];return Object(c.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(m+"get/productos");case 3:return e.next=5,e.sent.data;case 5:t=e.sent,g(t),o(t[0].nombre_producto),i(t[0].precioindividual_producto*t[0].cantidadporbolsa_producto),j(t[0].cantidadporbolsa_producto),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),O(!0),setTimeout((function(){O(!1),p.replace("/")}),1e3);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(b.jsxs)("div",{className:"contFormulario",children:[Object(b.jsxs)("form",{onSubmit:t,autoComplete:"off",className:"formulario",children:[Object(b.jsx)("div",{className:"inputs",children:Object(b.jsx)("select",{name:"producto",onChange:function(e){o(e.target.value);for(var t=0;t<v.length;t++)v[t].nombre_producto==e.target.value&&(i(v[t].precioindividual_producto*v[t].cantidadporbolsa_producto),j(v[t].cantidadporbolsa_producto))},children:v.map((function(e){return Object(b.jsx)("option",{value:e.nombre_producto,children:e.nombre_producto})}))})}),Object(b.jsx)("div",{className:"inputs",children:Object(b.jsx)("input",{type:"number",autoFocus:!0,value:s,onChange:function(e){r(e.target.value)}})}),Object(b.jsx)("div",{className:"inputs",children:Object(b.jsx)("input",{type:"submit",value:"Agregar",onClick:n})}),Object(b.jsx)("div",{className:"inputs",children:Object(b.jsx)("input",{type:"submit",value:"Quitar",onClick:a})})]}),Object(b.jsxs)("div",{className:"contLista",children:[Object(b.jsx)("h2",{className:"listprec",children:"LISTA DE PRECIOS"}),Object(b.jsx)("div",{className:"lista",children:Object(b.jsxs)("table",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"PRODUCTO"}),Object(b.jsx)("td",{children:"PRECIO x BOLSA"})]}),v.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{children:[e.nombre_producto," (",e.cantidadporbolsa_producto," pzs.)"]}),Object(b.jsx)("td",{children:e.precioindividual_producto*e.cantidadporbolsa_producto})]},e.nombre_producto)}))]})})]})]})}),f=(n(60),function(e){var t=e.datos,n=e.handleEnviar,c=e.total,a=e.comentarios,s=e.setComentarios;return Object(b.jsxs)("div",{className:"contListaProductos",children:[Object(b.jsx)("h2",{children:"TU LISTA"}),Object(b.jsx)("div",{className:"tablaProductos",children:Object(b.jsxs)("table",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Producto"}),Object(b.jsx)("td",{children:"Cantidad"})]}),t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.producto}),Object(b.jsx)("td",{children:e.cantidad})]})}))]})}),Object(b.jsx)("div",{className:"contTotal",children:Object(b.jsxs)("p",{children:["TOTAL: $ ",c]})}),Object(b.jsxs)("div",{className:"contComentarios",children:[Object(b.jsx)("p",{children:"A\xf1adir comentarios: "}),Object(b.jsx)("input",{type:"text",value:a,onChange:function(e){s(e.target.value)},maxLength:"200"})]}),Object(b.jsx)("div",{className:"contEnviar",children:Object(b.jsx)("button",{onClick:n,children:"ENVIAR LISTA"})})]})}),v=(n(61),function(e){var t=e.handleEnviar,n=e.setLoading,c=e.setFatal,a=e.history,s=e.setError,r=e.setErrorMSG,o=e.lista,i=e.setLista,l=e.comentarios,u=e.setComentarios,d=e.total,j=e.setTotal,O=e.cantidad,p=e.setCantidad,h=e.producto,m=e.setProducto,v=e.precio,g=e.setPrecio,C=e.pzs,S=e.setPzs,N=function(){setTimeout((function(){s(!1)}),1e3)};return Object(b.jsx)("div",{className:"contContent",children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("h2",{children:" REALIZA TU PEDIDO "}),Object(b.jsxs)("div",{className:"contenedor",children:[Object(b.jsx)(x,{handleSubmit:function(e){e.preventDefault()},handleAgregar:function(){if(h)if(O)if(parseInt(O)>0){for(var e=0,t={producto:h,cantidad:O,precio:v,pzs:C},n=0;n<o.length;n++)o[n].producto==t.producto&&(e+=1);0==e?(o.push(t),p("0"),j(d+t.precio*t.cantidad)):(r("El Producto ya esta en la lista."),s(!0),N())}else r("Debe haber al menos 1 de cantidad."),s(!0),N();else r("Debe haber al menos 1 de cantidad."),s(!0),N();else r("Debes seleccionar un producto."),s(!0),N()},handleQuitar:function(){if(0!==o.length){var e=o.length,t=o[e-1],n=t.cantidad*t.precio,c=o.slice(0,e-1);i(c),j(d-n)}else r("La lista esta vacia."),s(!0),N()},cantidad:O,setCantidad:p,setProducto:m,setPrecio:g,setPzs:S,setLoading:n,setFatal:c,history:a}),Object(b.jsx)(f,{datos:o,handleEnviar:t,total:d,setTotal:j,comentarios:l,setComentarios:u})]})]})})}),g=(n(62),function(){return Object(b.jsxs)("div",{className:"lds-roller",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})}),C=(n(63),n.p+"static/media/succesimage.60ec4d80.png"),S=function(){return Object(b.jsx)("div",{className:"contSuccess",children:Object(b.jsx)("img",{src:C,className:"imgSuccess"})})},N=(n(64),n.p+"static/media/fatalerror.068cfda4.png"),E=function(){return Object(b.jsxs)("div",{className:"contFatal",children:[Object(b.jsx)("img",{src:N,width:"200"}),Object(b.jsx)("h2",{children:"OCURRIO UN ERROR DE CONEXION"})]})},y=(n(65),function(e){var t=e.error,n=e.mensaje;return Object(b.jsx)("div",{className:"contError",style:t?{display:"block"}:{display:"none"},children:Object(b.jsx)("p",{children:n})})}),P=(n(66),function(){return Object(b.jsx)("div",{className:"contFooter",children:Object(b.jsx)("p",{children:"Copyrigth \xa9 2021 - GrimPlast"})})}),T=(n(67),function(e){var t=e.confirm,n=e.setConfirm,c=e.funcion;return Object(b.jsx)("div",{className:"contConfirm",style:t?{visibility:"visible"}:{visibility:"hidden"},children:Object(b.jsxs)("div",{className:"confirm",children:[Object(b.jsx)("p",{children:"\xbfEstas seguro que quieres enviar tu lista?"}),Object(b.jsxs)("div",{className:"confirmBotones",children:[Object(b.jsx)("button",{onClick:c,children:"SI"}),Object(b.jsx)("button",{onClick:function(){n(!t)},children:"NO"})]})]})})}),R=(n(68),n(17)),I=n(30),A=n.n(I);function k(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,c=e.getFullYear();return 1==n.toString().length?t+"/0"+n+"/"+c:t+"/"+n+"/"+c}function L(){var e=new Date,t=e.getHours(),n=e.getMinutes();return 1==n.toString().length?t+":0"+n:t+":"+n}var w=n.p+"static/media/headerpdf.bbcbde76.jpeg",D=function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),i=o[0],j=o[1],p=Object(c.useState)(!1),x=Object(d.a)(p,2),f=x[0],C=x[1],N=Object(c.useState)(e.location.state.correo),I=Object(d.a)(N,2),D=I[0],_=(I[1],Object(c.useState)("")),z=Object(d.a)(_,2),F=z[0],G=z[1],U=Object(c.useState)(!1),H=Object(d.a)(U,2),M=H[0],B=H[1],q=Object(c.useState)(""),J=Object(d.a)(q,2),Q=J[0],Z=J[1],V=Object(c.useState)(!1),X=Object(d.a)(V,2),W=X[0],Y=X[1],$=Object(c.useState)([]),K=Object(d.a)($,2),ee=K[0],te=K[1],ne=Object(c.useState)(""),ce=Object(d.a)(ne,2),ae=ce[0],se=ce[1],re=Object(c.useState)(0),oe=Object(d.a)(re,2),ie=oe[0],le=oe[1],ue=Object(c.useState)("0"),de=Object(d.a)(ue,2),je=de[0],be=de[1],Oe=Object(c.useState)(""),pe=Object(d.a)(Oe,2),he=pe[0],me=pe[1],xe=Object(c.useState)(0),fe=Object(d.a)(xe,2),ve=fe[0],ge=fe[1],Ce=Object(c.useState)(0),Se=Object(d.a)(Ce,2),Ne=Se[0],Ee=Se[1],ye=function(){setTimeout((function(){B(!1)}),1e3)};Object(c.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.prev=1,n=e.location.state.correo,t.next=5,h.a.post(m+"get/cliente/registro/correo",{correo:n});case 5:return t.next=7,t.sent.data;case 7:(c=t.sent).length>0?(G(c[0].nombre_cliente),s(!1)):(s(!1),Z("El usuario no existe."),B(!0),ye(),e.history.push("/")),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0),s(!1),j(!0),setTimeout((function(){j(!1),e.history.replace("/")}),1e3);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}})()()}),[]);var Pe=function(){for(var e=[],t=0;t<ee.length;t++)e.push([t+1,ee[t].producto,ee[t].cantidad,ee[t].precio,ee[t].pzs]);return e},Te=function(){var e=new R.jsPDF;e.addImage(w,"JPEG",0,0,210,15),e.text(k()+"  |  "+L(),150,25),e.text(F+"  |  "+D,15,35),A()(e,{head:[["ID","Producto","Cantidad","Precio","Pzs/Bolsa"]],body:Pe(),foot:[["","","","Total: ",ie]],margin:{top:37},theme:"grid",headStyles:{halign:"center",fillColor:"#000000",minCellHeight:10,valign:"middle"},bodyStyles:{fontStyle:"bold",fillColor:"#F4F4F4",textColor:"#000000",minCellHeight:10,valign:"middle"},footStyles:{fontStyle:"bold",fontSize:18,fillColor:"#000000",textColor:"#ffffff",halign:"center",minCellHeight:10,valign:"middle"}}),e.text('"'+ae+'"',15,function(){for(var e=50,t=0;t<ee.length;t++)e+=10;return e}()+15,{maxWidth:180}),e.save("GrimPlast_"+k())};return i?Object(b.jsx)(E,{}):a?Object(b.jsx)(g,{}):f?Object(b.jsx)(S,{}):Object(b.jsxs)("div",{className:"cont-main",children:[Object(b.jsxs)("div",{className:"main",children:[Object(b.jsx)(T,{confirm:W,setConfirm:Y,funcion:function(){var t=function(){var t=Object(u.a)(l.a.mark((function t(){var n,c,a,r,o,i,u,d,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(s(!0),new Date,n="",c="",a=k(),r=L(),o=0;o<ee.length;o++)n?(n+="@"+ee[o].producto,c+="@"+ee[o].cantidad):(n+=ee[o].producto,c+=ee[o].cantidad);return t.prev=7,ae||se("No hay comentarios"),i="NUEVO PEDIDO",u=F+" ha registrado un nuevo pedido. Para ver mas detalles consulta los aprtados de tu aplicaci\xf3n.",t.next=13,h.a.post(m+"insert/apartado",{correo:D,productos:n,cantidades:c,total:ie,fecha:a,hora:r,nombre:F,comentarios:ae});case 13:return d=t.sent,t.next=16,h.a.post(m+"send/mail",{titulo:i,mensaje:u});case 16:b=t.sent,d&&b&&(s(!1),C(!0),Te(),setTimeout((function(){te([]),me(""),be("0"),se(""),ge(0),le(0),Ee(0),C(!1)}),2e3)),t.next=26;break;case 20:t.prev=20,t.t0=t.catch(7),console.log(t.t0),s(!1),j(!0),setTimeout((function(){j(!1),e.history.replace("/")}),1e3);case 26:case"end":return t.stop()}}),t,null,[[7,20]])})));return function(){return t.apply(this,arguments)}}();0!==ee.length?(Y(!W),t()):(Y(!W),Z("La lista esta vacia."),B(!0),ye())}}),Object(b.jsx)(y,{error:M,mensaje:Q}),Object(b.jsx)(O,{}),Object(b.jsx)(v,{handleEnviar:function(){Y(!W)},setLoading:s,setFatal:j,history:e.history,setError:B,setErrorMSG:Z,lista:ee,setLista:te,comentarios:ae,setComentarios:se,total:ie,setTotal:le,cantidad:je,setCantidad:be,producto:he,setProducto:me,precio:ve,setPrecio:ge,pzs:Ne,setPzs:Ee})]}),Object(b.jsx)("div",{className:"cont-footer",children:Object(b.jsx)(P,{})})]})},_=(n(69),function(e){var t=e.history,n=Object(c.useState)(!1),a=Object(d.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)(!0),i=Object(d.a)(o,2),j=i[0],O=i[1],p=Object(c.useState)(""),x=Object(d.a)(p,2),f=x[0],v=x[1],C=Object(c.useState)(""),N=Object(d.a)(C,2),P=N[0],T=N[1],R=Object(c.useState)(""),I=Object(d.a)(R,2),A=I[0],k=I[1],L=Object(c.useState)(!1),w=Object(d.a)(L,2),D=w[0],_=w[1],z=Object(c.useState)(!1),F=Object(d.a)(z,2),G=F[0],U=F[1],H=Object(c.useState)(!1),M=Object(d.a)(H,2),B=M[0],q=M[1],J=Object(c.useState)(!1),Q=Object(d.a)(J,2),Z=Q[0],V=Q[1],X=Object(c.useState)(""),W=Object(d.a)(X,2),Y=W[0],$=W[1],K=function(e){e.preventDefault()},ee=function(){setTimeout((function(){_(!1)}),1e3)},te=function(){setTimeout((function(){V(!1)}),2e3)};return B?Object(b.jsx)(E,{}):G?Object(b.jsx)(S,{}):D?Object(b.jsx)(g,{}):Object(b.jsxs)("div",{className:"conthome",children:[Object(b.jsx)(y,{error:Z,mensaje:Y}),Object(b.jsx)("div",{className:"contRegistro",style:s?{display:"contents"}:{display:"none"},onSubmit:K,children:Object(b.jsxs)("form",{autoComplete:"off",children:[Object(b.jsxs)("div",{className:"inputRegistro",children:[Object(b.jsx)("p",{children:"Nombre de la marca:"}),Object(b.jsx)("input",{type:"text",autoFocus:!0,value:f,onChange:function(e){v(e.target.value)},maxLength:"15"})]}),Object(b.jsxs)("div",{className:"inputRegistro",children:[Object(b.jsx)("p",{children:"Correo:"}),Object(b.jsx)("input",{type:"text",value:P,onChange:function(e){T(e.target.value)}})]}),Object(b.jsxs)("div",{className:"inputRegistro",children:[Object(b.jsx)("p",{children:"Contrase\xf1a:"}),Object(b.jsx)("input",{type:"text",value:A,onChange:function(e){k(e.target.value)}})]}),Object(b.jsxs)("div",{className:"inputRegistro",children:[Object(b.jsx)("button",{onClick:function(){_(!0),r(!1),O(!0),T(""),k(""),v(""),ee()},children:"CERRAR"}),Object(b.jsx)("button",{onClick:function(){if(f&&P&&A){if(null!==/[a-zA-Z0-9]+@[a-zA-z0-9]+\.[a-zA-Z0-9]+/g.exec(P)){_(!0);var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post(m+"get/cliente/registro/nombre",{nombre:f});case 3:return e.next=5,e.sent.data;case 5:if(!(e.sent.length>0)){e.next=13;break}return $("El nombre ingresado ya esta en uso."),V(!0),te(),e.abrupt("return");case 13:return e.next=15,h.a.post(m+"get/cliente/registro/correo",{correo:P});case 15:return e.next=17,e.sent.data;case 17:if(!(e.sent.length>0)){e.next=25;break}return $("El correo ingresado ya esta en uso."),V(!0),te(),e.abrupt("return");case 25:return t="PETICION DE REGISTRO",n=f+" quiere registrarse en el sistema. Para confirmarlo revisa tu lista de espera de clientes en la APP.",e.next=29,h.a.post(m+"insert/cliente",{nombre:f,correo:P,password:A});case 29:return c=e.sent,e.next=32,h.a.post(m+"send/mail",{titulo:t,mensaje:n});case 32:e.sent,1==c.data.affectedRows?(_(!1),U(!0),setTimeout((function(){v(""),U(!1),O(!0),r(!1)}),1e3)):($("NO SE PUDO REGISTRAR AL CLIENTE."),V(!0),te());case 34:e.next=42;break;case 36:e.prev=36,e.t0=e.catch(0),console.log(e.t0),_(!1),q(!0),setTimeout((function(){r(!1),O(!0),T(""),v(""),k(""),q(!1)}),1e3);case 42:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(){return e.apply(this,arguments)}}();setTimeout((function(){e(),_(!1)}),500)}else $("Correo invalido."),V(!0),te()}else $("Debes llenar todos los campos"),V(!0),te()},children:"REGISTRARSE"})]})]})}),Object(b.jsx)("div",{className:"contLogin",style:j?{display:"contents"}:{display:"none"},onSubmit:K,children:Object(b.jsxs)("form",{autoComplete:"off",children:[Object(b.jsxs)("div",{className:"inputRegistro",children:[Object(b.jsx)("p",{children:"Correo:"}),Object(b.jsx)("input",{type:"text",value:P,onChange:function(e){T(e.target.value)}})]}),Object(b.jsxs)("div",{className:"inputRegistro",children:[Object(b.jsx)("p",{children:"Contrase\xf1a:"}),Object(b.jsx)("input",{type:"password",value:A,onChange:function(e){k(e.target.value)}})]}),Object(b.jsxs)("div",{className:"inputRegistro",children:[Object(b.jsx)("button",{onClick:function(){_(!0),r(!0),O(!1),T(""),k(""),ee()},children:"REGISTRARSE"}),Object(b.jsx)("button",{onClick:function(){P&&A?function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,h.a.post(m+"get/cliente/registro/correo",{correo:P});case 4:return e.next=6,e.sent.data;case 6:(n=e.sent).length>0?n[0].correo_cliente==P?n[0].password_cliente==A?"true"==n[0].cliente_verificado?setTimeout((function(){_(!1),t.replace({pathname:"/Home",search:"",state:{correo:P}})}),1e3):(_(!1),$("Espera hasta que el administrador te conceda el acceso."),V(!0),te()):(_(!1),$("Contrase\xf1a incorrecta."),V(!0),te()):(_(!1),$("Correo incorrecto."),V(!0),te()):(_(!1),$("LA CUENTA NO EXISTE"),V(!0),te()),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),_(!1),q(!0),setTimeout((function(){T(""),v(""),k(""),q(!1)}),1e3);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}()():($("DEBES COMPLETAR TODOS LOS CAMPOS"),V(!0),te())},children:"INICIAR SESION"})]})]})})]})}),z=function(){return Object(b.jsx)(r.a,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",component:_}),Object(b.jsx)(o.a,{exact:!0,path:"/Home",component:D}),Object(b.jsx)(o.a,{component:_})]})})};s.a.render(Object(b.jsx)(z,{}),document.getElementById("root"))}},[[74,1,3]]]);
//# sourceMappingURL=main.3deb2c66.chunk.js.map